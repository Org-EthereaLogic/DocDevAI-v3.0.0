name: "First Draft Review"
description: "Initial review pass for generated documents focusing on completeness and structure"
category: "review"
version: "1.0.0"

# Define what inputs this template needs
inputs:
  - name: "document"
    type: "document"
    required: true
    description: "The document to review"
    
  - name: "document_type"
    type: "string"
    required: true
    description: "Type of document being reviewed"
    
  - name: "user_stories"
    type: "document"
    required: false
    description: "User stories for context"
    
  - name: "project_plan"
    type: "document"
    required: false
    description: "Project plan for context"
    
  - name: "software_requirements"
    type: "document"
    required: false
    description: "SRS for context"

# LLM configuration for multi-provider synthesis
llm_config:
  providers:
    - name: "claude"
      weight: 0.4
      model: "claude-3-opus-20240229"
    - name: "openai"
      weight: 0.35
      model: "gpt-4-turbo-preview"
    - name: "google"
      weight: 0.25
      model: "gemini-pro"
  
  temperature: 0.6
  max_tokens: 4000

# The actual prompt template
prompt:
  system: |
    You are a Senior Technical Editor and Documentation Quality Analyst specializing 
    in software documentation review. Your role is to provide constructive feedback 
    on first drafts, focusing on completeness, clarity, consistency, and structure.
    
    Your reviews are:
    - Constructive and actionable
    - Focused on improving quality
    - Specific with examples
    - Prioritized by importance
    - Balanced between positive feedback and areas for improvement
  
  user: |
    Review the following {{document_type}} document and provide comprehensive feedback 
    on its first draft quality.
    
    <document_to_review>
    {{document}}
    </document_to_review>
    
    {% if user_stories %}
    <context_user_stories>
    {{user_stories}}
    </context_user_stories>
    {% endif %}
    
    {% if project_plan %}
    <context_project_plan>
    {{project_plan}}
    </context_project_plan>
    {% endif %}
    
    {% if software_requirements %}
    <context_requirements>
    {{software_requirements}}
    </context_requirements>
    {% endif %}
    
    Conduct a thorough first-draft review covering:
    
    <review_feedback>
    ## First Draft Review - {{document_type}}
    
    ### 1. Completeness Assessment
    
    #### 1.1 Required Sections
    - [ ] All expected sections present
    - [ ] Adequate detail in each section
    - [ ] No obvious gaps or omissions
    
    **Missing Elements:**
    - [List any missing required elements]
    
    **Underdeveloped Sections:**
    - [List sections needing more detail]
    
    ### 2. Structure and Organization
    
    #### 2.1 Document Flow
    - **Logical Progression:** [Assessment of flow]
    - **Section Ordering:** [Is the order appropriate?]
    - **Transitions:** [Are transitions smooth?]
    
    #### 2.2 Formatting and Presentation
    - **Consistency:** [Is formatting consistent?]
    - **Readability:** [Is it easy to read and scan?]
    - **Visual Elements:** [Are diagrams/tables helpful?]
    
    ### 3. Content Quality
    
    #### 3.1 Clarity
    - **Language:** [Is language clear and appropriate?]
    - **Technical Accuracy:** [Are technical details correct?]
    - **Ambiguities:** [List any ambiguous statements]
    
    #### 3.2 Depth and Detail
    - **Sufficient Detail:** [Areas with good detail]
    - **Needs Expansion:** [Areas needing more detail]
    - **Overdetailed:** [Areas that could be simplified]
    
    ### 4. Consistency Check
    
    #### 4.1 Internal Consistency
    - **Terminology:** [Is terminology used consistently?]
    - **Cross-references:** [Do references align?]
    - **Contradictions:** [Any conflicting statements?]
    
    #### 4.2 External Consistency
    - **Alignment with Context:** [Does it align with other documents?]
    - **Standards Compliance:** [Does it follow expected standards?]
    
    ### 5. Specific Improvements Needed
    
    #### High Priority (Must Fix)
    1. [Critical issue 1]
       - **Location:** [Where in document]
       - **Issue:** [What's wrong]
       - **Suggestion:** [How to fix]
    
    2. [Critical issue 2]
    
    #### Medium Priority (Should Fix)
    1. [Important improvement 1]
    2. [Important improvement 2]
    
    #### Low Priority (Nice to Have)
    1. [Minor enhancement 1]
    2. [Minor enhancement 2]
    
    ### 6. Positive Aspects
    
    **Strengths of This Draft:**
    - [What was done well]
    - [Effective sections or approaches]
    - [Good examples or explanations]
    
    ### 7. Overall Assessment
    
    **Draft Quality Score:** [X/10]
    
    **Readiness Level:**
    - [ ] Ready for next review phase
    - [ ] Needs minor revisions
    - [ ] Needs significant revisions
    - [ ] Requires major rework
    
    **Key Recommendation:**
    [Primary action to improve this document]
    
    </review_feedback>
    
    <improvement_suggestions>
    Provide 3-5 specific, actionable suggestions for immediate improvement:
    1. [Specific suggestion with example]
    2. [Specific suggestion with example]
    3. [Specific suggestion with example]
    </improvement_suggestions>
    
    <quality_metrics>
    Rate the document on key quality dimensions (1-10):
    - Completeness: [score]
    - Clarity: [score]
    - Consistency: [score]
    - Technical Accuracy: [score]
    - Organization: [score]
    - Overall Quality: [score]
    </quality_metrics>

# Output processing configuration
output:
  format: "structured"
  sections:
    - name: "review_feedback"
      type: "analysis"
      extract_tag: "review_feedback"
      
    - name: "improvement_suggestions"
      type: "list"
      extract_tag: "improvement_suggestions"
      
    - name: "quality_metrics"
      type: "metrics"
      extract_tag: "quality_metrics"

# MIAIR optimization settings
miair_config:
  enabled: true
  target_quality: 0.80
  max_iterations: 2
  focus_areas:
    - "actionability"
    - "specificity"
    - "constructiveness"