name: "Architecture Design Review"
description: "Comprehensive review of architecture blueprint with SRS refinement"
category: "review"
version: "1.0.0"

# Define what inputs this template needs
inputs:
  - name: "architecture_blueprint"
    type: "document"
    required: true
    description: "The architecture blueprint document to review"
    
  - name: "user_stories"
    type: "document"
    required: true
    description: "User stories document for alignment check"
    
  - name: "prd"
    type: "document"
    required: true
    description: "Product Requirements Document"
    
  - name: "project_name"
    type: "string"
    required: false
    default: "Project"
    description: "Name of the project being reviewed"

# LLM configuration
llm_config:
  # Use multi-LLM synthesis
  providers:
    - name: "claude"
      weight: 0.4
      model: "claude-3-opus-20240229"
    - name: "openai"
      weight: 0.35
      model: "gpt-4-turbo-preview"
    - name: "google"
      weight: 0.25
      model: "gemini-pro"
  
  # Temperature and other parameters
  temperature: 0.7
  max_tokens: 8000
  
# The actual prompt template
prompt:
  system: |
    You are a Documentation Specialist and Technical Communicator tasked with 
    conducting a Design Review of the {{project_name}} Architecture Blueprint 
    and refining the Software Requirements Specification (SRS). Your review 
    should be thorough, critical, and constructive, focusing on the technical 
    aspects of the design and its alignment with user needs and product requirements.
  
  user: |
    You will be provided with three key documents:
    
    1. Architecture Blueprint:
    <architecture_blueprint>
    {{architecture_blueprint}}
    </architecture_blueprint>
    
    2. User Stories:
    <user_stories>
    {{user_stories}}
    </user_stories>
    
    3. Product Requirements Document (PRD):
    <prd>
    {{prd}}
    </prd>
    
    Your task is divided into two main parts:
    
    Part 1: Design Review
    Conduct a comprehensive review of the Architecture Blueprint, focusing on:
    
    a) Technical Suitability:
    - Analyze the decomposition and arrangement of software components
    - Evaluate the overall system structure and its ability to meet requirements
    - Identify potential issues or inconsistencies in component interactions
    
    b) Quality Attributes:
    Examine these attributes and how they are addressed:
    - Maintainability
    - Portability
    - Testability
    - Usability
    - Performance
    - Security
    - Robustness
    
    c) Architectural Styles & Design Patterns:
    - Identify and evaluate architectural styles used
    - Verify appropriate design patterns are applied
    - Assess suitability for system requirements
    
    Part 2: SRS Refinement
    Examine the User Stories and PRD to refine the Software Requirements Specification:
    - Ensure all requirements are clear, concise, and unambiguous
    - Verify requirements are traceable to user stories and PRD
    - Eliminate inconsistencies or conflicts
    - Add missing requirements implied by user stories or PRD
    - Organize requirements logically
    
    Output Format:
    Present your findings in the following format:
    
    <design_review>
    1. Technical Suitability Analysis
    2. Quality Attributes Examination
    3. Architectural Styles & Design Patterns Verification
    </design_review>
    
    <refined_srs>
    [Include the fully refined SRS here, with all sections rewritten and complete]
    </refined_srs>
    
    <recommendations>
    [Provide a list of key recommendations for improving the architecture and requirements]
    </recommendations>

# Output processing configuration
output:
  format: "structured"
  sections:
    - name: "design_review"
      type: "analysis"
      extract_tag: "design_review"
      
    - name: "refined_srs"
      type: "document"
      extract_tag: "refined_srs"
      save_as: "srs_refined.md"
      
    - name: "recommendations"
      type: "list"
      extract_tag: "recommendations"
      
# MIAIR optimization settings
miair_config:
  enabled: true
  target_quality: 0.85
  max_iterations: 5
  focus_areas:
    - "technical_accuracy"
    - "consistency"
    - "completeness"