============================= test session starts ==============================
platform darwin -- Python 3.13.5, pytest-8.4.2, pluggy-1.6.0 -- /Users/etherealogic/Dev/DocDevAI-v3.0.0/.venv/bin/python
cachedir: .pytest_cache
benchmark: 5.1.0 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
hypothesis profile 'default'
rootdir: /Users/etherealogic/Dev/DocDevAI-v3.0.0
configfile: pytest.ini
plugins: asyncio-1.1.0, mock-3.15.0, cov-6.3.0, anyio-4.10.0, benchmark-5.1.0, hypothesis-6.138.14
asyncio: mode=Mode.STRICT, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 36 items

tests/unit/core/test_config.py::TestPrivacyConfig::test_privacy_defaults_are_private PASSED [  2%]
tests/unit/core/test_config.py::TestPrivacyConfig::test_privacy_config_validation PASSED [  5%]
tests/unit/core/test_config.py::TestPrivacyConfig::test_privacy_config_mutability PASSED [  8%]
tests/unit/core/test_config.py::TestSystemConfig::test_memory_mode_auto_detection_baseline PASSED [ 11%]
tests/unit/core/test_config.py::TestSystemConfig::test_memory_mode_auto_detection_standard PASSED [ 13%]
tests/unit/core/test_config.py::TestSystemConfig::test_memory_mode_auto_detection_enhanced PASSED [ 16%]
tests/unit/core/test_config.py::TestSystemConfig::test_memory_mode_auto_detection_performance PASSED [ 19%]
tests/unit/core/test_config.py::TestSystemConfig::test_memory_mode_manual_override PASSED [ 22%]
tests/unit/core/test_config.py::TestSystemConfig::test_invalid_memory_mode PASSED [ 25%]
tests/unit/core/test_config.py::TestSystemConfig::test_cache_size_parsing PASSED [ 27%]
tests/unit/core/test_config.py::TestSecurityConfig::test_security_defaults PASSED [ 30%]
tests/unit/core/test_config.py::TestSecurityConfig::test_security_config_validation PASSED [ 33%]
tests/unit/core/test_config.py::TestLLMConfig::test_llm_defaults PASSED  [ 36%]
tests/unit/core/test_config.py::TestLLMConfig::test_llm_provider_validation PASSED [ 38%]
tests/unit/core/test_config.py::TestLLMConfig::test_llm_api_key_handling PASSED [ 41%]
tests/unit/core/test_config.py::TestQualityConfig::test_quality_defaults PASSED [ 44%]
tests/unit/core/test_config.py::TestQualityConfig::test_quality_score_validation PASSED [ 47%]
tests/unit/core/test_config.py::TestConfigurationManager::test_initialization_with_defaults PASSED [ 50%]
tests/unit/core/test_config.py::TestConfigurationManager::test_yaml_loading PASSED [ 52%]
tests/unit/core/test_config.py::TestConfigurationManager::test_invalid_yaml_handling PASSED [ 55%]
tests/unit/core/test_config.py::TestConfigurationManager::test_missing_config_file PASSED [ 58%]
tests/unit/core/test_config.py::TestConfigurationManager::test_api_key_encryption_decryption PASSED [ 61%]
tests/unit/core/test_config.py::TestConfigurationManager::test_api_key_encryption_different_keys PASSED [ 63%]
tests/unit/core/test_config.py::TestConfigurationManager::test_configuration_get_method PASSED [ 66%]
tests/unit/core/test_config.py::TestConfigurationManager::test_configuration_set_method PASSED [ 69%]
tests/unit/core/test_config.py::TestConfigurationManager::test_configuration_data_handling PASSED [ 72%]
tests/unit/core/test_config.py::TestConfigurationManager::test_configuration_save PASSED [ 75%]
tests/unit/core/test_config.py::TestConfigurationManager::test_environment_variable_override PASSED [ 77%]
tests/unit/core/test_config.py::TestConfigurationManager::test_configuration_performance_retrieval PASSED [ 80%]
tests/unit/core/test_config.py::TestConfigurationManager::test_configuration_loading_performance PASSED [ 83%]
tests/unit/core/test_config.py::TestConfigurationManager::test_thread_safety PASSED [ 86%]
tests/unit/core/test_config.py::TestConfigurationIntegration::test_full_configuration_lifecycle PASSED [ 88%]
tests/unit/core/test_config.py::TestConfigurationIntegration::test_encrypted_api_key_persistence PASSED [ 91%]
tests/unit/core/test_config.py::TestErrorHandling::test_corrupt_encryption_handling PASSED [ 94%]
tests/unit/core/test_config.py::TestErrorHandling::test_invalid_configuration_schema PASSED [ 97%]
tests/unit/core/test_config.py::TestErrorHandling::test_permission_error_handling PASSED [100%]
ERROR: Coverage failure: total of 18.62 is less than fail-under=20.00


================================ tests coverage ================================
_______________ coverage: platform darwin, python 3.13.5-final-0 _______________

Name                                            Stmts   Miss Branch BrPart   Cover   Missing
--------------------------------------------------------------------------------------------
devdocai/__init__.py                               14      6      4      0  44.44%   23-28
devdocai/cli.py                                    67     67      2      0   0.00%   14-140
devdocai/core/config.py                           156     21     58     17  81.31%   68->74, 85->80, 91, 94->80, 97->80, 102-103, 108, 137, 150, 170, 178, 209-210, 217, 223, 240-245, 250, 254, 259-262
devdocai/core/encryption.py                        62      8     14      6  78.95%   33->36, 47->52, 49, 61->66, 63, 88-91, 95-96
devdocai/core/memory.py                            34     19     10      0  34.09%   22-31, 36, 41, 46-56
devdocai/core/models.py                            63      2     16      2  94.94%   56->60, 68-69
devdocai/intelligence/__init__.py                   2      2      0      0   0.00%   6-21
devdocai/intelligence/llm_adapter.py              604    604    118      0   0.00%   6-1260
devdocai/intelligence/llm_adapter_original.py     606    606    132      0   0.00%   6-1843
devdocai/storage/__init__.py                        5      5      0      0   0.00%   12-23
devdocai/storage/pii_detector.py                   50     50      6      0   0.00%   13-173
devdocai/storage/secure_storage.py                 21     21      0      0   0.00%   13-120
devdocai/storage/storage_manager.py                20     20      0      0   0.00%   13-111
devdocai/utils/cache.py                            34      8     10      4  72.73%   28, 34, 39-40, 48-49, 54-55
devdocai/utils/validation.py                       34      7      8      2  78.57%   24-25, 34, 41-42, 57-58
--------------------------------------------------------------------------------------------
TOTAL                                            1776   1446    378     31  18.62%

1 file skipped due to complete coverage.
Coverage HTML written to dir htmlcov
Coverage XML written to file coverage.xml
FAIL Required test coverage of 20% not reached. Total coverage: 18.62%
============================== 36 passed in 1.55s ==============================
