<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DevDocAI Debug Test</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #0f0;
        }
        .status { margin: 10px 0; }
        .ok { color: #0f0; }
        .error { color: #f00; }
        .warning { color: #ff0; }
        pre { 
            background: #000; 
            padding: 10px; 
            border: 1px solid #0f0;
            overflow: auto;
            max-height: 400px;
        }
    </style>
</head>
<body>
    <h1>DevDocAI Service Debug Test</h1>
    
    <div class="status">Checking browser environment...</div>
    
    <h2>Environment Tests:</h2>
    <div id="env-tests"></div>
    
    <h2>Console Output:</h2>
    <pre id="console-output"></pre>
    
    <h2>Instructions:</h2>
    <ol>
        <li>Open <a href="http://localhost:3000" target="_blank">http://localhost:3000</a> in a new tab</li>
        <li>Press F12 to open Developer Tools</li>
        <li>Check the Console tab for initialization messages</li>
        <li>Look for these key messages:
            <ul>
                <li class="ok">✓ App component rendering...</li>
                <li class="ok">✓ Starting app initialization...</li>
                <li class="ok">✓ ConfigurationService initialized successfully</li>
                <li class="ok">✓ StorageService initialized successfully</li>
                <li class="ok">✓ MIAIR engine initialized successfully</li>
                <li class="ok">✓ NotificationService initialized successfully</li>
            </ul>
        </li>
    </ol>
    
    <script>
        const envTests = document.getElementById('env-tests');
        const consoleOutput = document.getElementById('console-output');
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        // Capture console output
        const logs = [];
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            logs.push({type: 'log', message: args.join(' ')});
            updateConsoleDisplay();
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            logs.push({type: 'error', message: args.join(' ')});
            updateConsoleDisplay();
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            logs.push({type: 'warn', message: args.join(' ')});
            updateConsoleDisplay();
        };
        
        function updateConsoleDisplay() {
            consoleOutput.innerHTML = logs.map(log => {
                const color = log.type === 'error' ? '#f00' : 
                              log.type === 'warn' ? '#ff0' : '#0f0';
                return `<span style="color: ${color}">[${log.type}] ${log.message}</span>`;
            }).join('\n');
        }
        
        // Run environment tests
        function runTests() {
            const tests = [];
            
            // localStorage test
            try {
                localStorage.setItem('test', 'value');
                const value = localStorage.getItem('test');
                localStorage.removeItem('test');
                tests.push('<div class="ok">✓ localStorage: Working</div>');
            } catch (e) {
                tests.push(`<div class="error">✗ localStorage: ${e.message}</div>`);
            }
            
            // Notification API test
            try {
                if ('Notification' in window) {
                    tests.push('<div class="ok">✓ Notification API: Available</div>');
                } else {
                    tests.push('<div class="warning">⚠ Notification API: Not available</div>');
                }
            } catch (e) {
                tests.push(`<div class="error">✗ Notification API: ${e.message}</div>`);
            }
            
            // Window object test
            if (typeof window !== 'undefined') {
                tests.push('<div class="ok">✓ Window object: Available</div>');
            } else {
                tests.push('<div class="error">✗ Window object: Not available</div>');
            }
            
            // Audio API test
            if ('Audio' in window) {
                tests.push('<div class="ok">✓ Audio API: Available</div>');
            } else {
                tests.push('<div class="warning">⚠ Audio API: Not available</div>');
            }
            
            // Performance API test
            if ('performance' in window) {
                tests.push('<div class="ok">✓ Performance API: Available</div>');
            } else {
                tests.push('<div class="warning">⚠ Performance API: Not available</div>');
            }
            
            envTests.innerHTML = tests.join('');
        }
        
        // Run tests on load
        runTests();
        
        // Test service initialization
        console.log('Debug page loaded - waiting for app initialization...');
        
        // Try to load the app bundle to see errors
        const script = document.createElement('script');
        script.onerror = (e) => {
            console.error('Failed to load app bundle:', e);
        };
        
        // Don't actually load the bundle here, just show status
        console.log('Ready to debug. Please open http://localhost:3000 in another tab.');
    </script>
</body>
</html>