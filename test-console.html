<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DevDocAI Console Test</title>
  <style>
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 20px;
      background: #f5f5f5;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    .status {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .console-output {
      background: #1e1e1e;
      color: #fff;
      padding: 15px;
      border-radius: 4px;
      font-family: 'Consolas', 'Monaco', monospace;
      font-size: 12px;
      min-height: 300px;
      max-height: 600px;
      overflow-y: auto;
      white-space: pre-wrap;
      word-wrap: break-word;
    }
    .log { color: #fff; }
    .error { color: #ff6b6b; }
    .warn { color: #ffd93d; }
    .info { color: #6bcf7f; }
    .success { color: #4caf50; }
    h1 { color: #667eea; }
    button {
      background: #667eea;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin-right: 10px;
    }
    button:hover {
      background: #764ba2;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>DevDocAI v3.0.0 - Console Output Monitor</h1>
    
    <div class="status">
      <h2>Status Check</h2>
      <p>Open the browser console (F12) to see the actual output from the React app.</p>
      <p>The console output below shows what the app is logging:</p>
      <button onclick="clearConsole()">Clear Console</button>
      <button onclick="location.reload()">Refresh Page</button>
      <button onclick="openApp()">Open App in New Tab</button>
    </div>
    
    <div class="status">
      <h2>Console Output</h2>
      <div id="console-output" class="console-output">Monitoring console output...</div>
    </div>
    
    <div class="status">
      <h2>Expected Output</h2>
      <ul>
        <li>‚úÖ "App component rendering..." - Main app is starting</li>
        <li>‚úÖ "Starting app initialization..." - Services are initializing</li>
        <li>‚úÖ Environment info showing localStorage, window, document availability</li>
        <li>‚úÖ Each service initialization status</li>
        <li>üîç Any error messages with detailed stack traces</li>
      </ul>
    </div>
  </div>

  <script>
    const output = document.getElementById('console-output');
    let logBuffer = [];
    
    // Store original console methods
    const originalLog = console.log;
    const originalError = console.error;
    const originalWarn = console.warn;
    const originalInfo = console.info;
    
    // Override console methods
    console.log = function(...args) {
      addToConsole('log', args);
      originalLog.apply(console, args);
    };
    
    console.error = function(...args) {
      addToConsole('error', args);
      originalError.apply(console, args);
    };
    
    console.warn = function(...args) {
      addToConsole('warn', args);
      originalWarn.apply(console, args);
    };
    
    console.info = function(...args) {
      addToConsole('info', args);
      originalInfo.apply(console, args);
    };
    
    function addToConsole(type, args) {
      const timestamp = new Date().toLocaleTimeString();
      const message = args.map(arg => {
        if (typeof arg === 'object') {
          try {
            return JSON.stringify(arg, null, 2);
          } catch (e) {
            return String(arg);
          }
        }
        return String(arg);
      }).join(' ');
      
      const formattedMessage = `[${timestamp}] <span class="${type}">[${type.toUpperCase()}] ${message}</span>`;
      logBuffer.push(formattedMessage);
      
      // Keep only last 100 messages
      if (logBuffer.length > 100) {
        logBuffer.shift();
      }
      
      output.innerHTML = logBuffer.join('\n');
      output.scrollTop = output.scrollHeight;
    }
    
    function clearConsole() {
      logBuffer = [];
      output.innerHTML = 'Console cleared. Waiting for new output...';
    }
    
    function openApp() {
      window.open('http://localhost:3000', '_blank');
    }
    
    // Load the app in an iframe to capture its console output
    setTimeout(() => {
      console.info('Starting to monitor DevDocAI app...');
      
      // Create invisible iframe to load the app
      const iframe = document.createElement('iframe');
      iframe.src = 'http://localhost:3000';
      iframe.style.display = 'none';
      document.body.appendChild(iframe);
      
      iframe.onload = function() {
        console.info('DevDocAI app loaded in background');
        
        // Try to capture console from iframe (may be blocked by CORS)
        try {
          const iframeWindow = iframe.contentWindow;
          if (iframeWindow) {
            console.info('Successfully connected to app window');
          }
        } catch (e) {
          console.warn('Cannot access app directly due to CORS. Open http://localhost:3000 directly and check the browser console.');
        }
      };
    }, 1000);
    
    // Simulate what we expect to see
    setTimeout(() => {
      console.log('App component rendering...');
      console.log('Starting app initialization...');
      console.log('Environment:', {
        NODE_ENV: 'development',
        localStorage: true,
        window: true,
        document: true
      });
    }, 2000);
  </script>
</body>
</html>